<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Trove Design Document: User Interface Design</TITLE>
<LINK HREF="trove-design-4.html" REL=next>
<LINK HREF="trove-design-2.html" REL=previous>
<LINK HREF="trove-design.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="trove-design-4.html">Next</A>
<A HREF="trove-design-2.html">Previous</A>
<A HREF="trove-design.html#toc3">Contents</A>
<HR>
<H2><A NAME="interface"></A> <A NAME="s3">3. User Interface Design</A></H2>

<P>
<P>
<H2><A NAME="ss3.1">3.1 User Roles</A>
</H2>

<P>To understand the interface, it will be helpful to recognize that
different kinds of people will be using the archive:
<P>
<H3>Users</H3>

<P>Users (people looking for packages that match their requirements to
download) are presented with a search/browse form on the Web.  The
search/browse form allows them to enter search terms (discriminators).
The keywords may be selected with buttons from a controlled vocabulary
defined by site policy, or entered as `roll-your-owns' in a text
field for free-text searching of package descriptions.
<P>Searches would yield all targets that are in the the intersection set of the
controlled-keyword hits, intersected with all hits from a search for
roll-your-own keywords in package text descriptions.  We'll give below
a more detailed description of the handling of 
<A HREF="#keytrees">controlled-vocabulary keywords</A>.
<P>The result of a search/browse operation is a generated HTML
<B>catalog listing</B>.  The body of a catalog listing
consists of a series of one-line entries each beginning with a
package-name hotlink and including a one-line package summary.  The
catalog has section headers indicating which lines are
controlled-keyword hits and which are free-text hits.
<P>Users looking at a catalog listing may either refine the search or
look at individual entries that interest them (by chasing the
package-name hotlinks).  An individual entry displays all package
metadata contained in the Trove database, possibly including resource
links to a local cache of package resource files.
<P>When an individual entry is selected, a user may take one of several
actions:
<P>
<UL>
<LI>Chase a resource hotlink on the package metadata display (such as the
package home page URL, or a mailto URL for the package contact
person).</LI>
<LI>Download package resources (e.g. by chasing FTP hotlinks on the
package metadata display).</LI>
<LI>Subscribe or unsubscribe to the package's notification list (that is,
the list of people automatically notified by email whenever package
metadata or resources are changed).  All unsubscription requests must
be authenticated; this is to prevent bad guys from masquerading as
good guys in order to suppress notifications.</LI>
<LI>Attach a review annotation to the package. (This is a future feature
and has not yet been designed into the database schema.)</LI>
</UL>
<P>
<H3>Contributors</H3>

<P>Contributors have three tasks: (1) creating and updating resources,
(2) creating and updating package records, and (3) creating and updating 
person records.  All three of these things are done in the same way;
by submitting TRL requests to a Trove site.  
<P>A contributor can either mail a TRL request to a Trove mail robot, or
use a TRL request to register a URL where update requests for a given
package can be found.  Periodically a Trove crawler will go to the
registered URL to pick up a new copy of the metadata.  The crawler
keeps internal track of the last-upload time and will only actually
copy the metadata if the file has since been altered.
<P>In either case, if the request is authenticated (PGP-signed) it will
be executed immediately and a report emailed to the contributor.  If
the request is not authenticated, it will be emailed back to the
contributor's home address for confirmation; the confirmation message
will include a request ticket.  Replying to the confirmation email will
ship it back to Trove for execution of the request.
<P>TRL requests may also be generated by a browser session with Trove (in fact,
this will be normal for initial package creation, and assist the contributor
in aditing controlled-vocabulary fields like discriminators).  When the
request is committed, a TRL copy will be made and emailed to the contributor.
including a request ticket. 
<P>When a Trove server finally executes a request, it makes local
copies of any attached and replica resources.  It then makes whatever
modifications are permitted by the request's privilege level and the
locked/unlocked state of the items the request wants to modify.
Finally, an email report of all changes made (and any updates refused)
is sent to everyone on the package notification list.
<P>
<H3>Administrators</H3>

<P>Trove site administrators get email notification of all package creations
(so they can watch for site-policy violations).
<P>Trove site administrators can use a web form to view a catalog of
recently added entries, and delete or modify them if there appears to 
be some problem.
<P>Administrators are also responsible for watching logs of roll-your-own
keyword entries and noticing when keywords should be migrated into the
core keyword set described in site policy.
<P>
<H3>Mirror Makers</H3>

<P>Mirror makers include both CD-ROM distribution makers and people
running load-sharing mirrors of a Trove site.  Both have the same
requirement, which is to be able to snapshot the library to another
medium.  The CD-ROM distributor's happens to be read-only, but he
has every good reason to simply ship an instance of Trove as his
organizer for the archive.
<P>
<H2><A NAME="ss3.2">3.2 Searching and Browsing</A>
</H2>

<P>
<A NAME="keytrees"></A> To flesh out the user interface, we also need to
specify how users will find packages.  We have developed a unified
searching/browsing model for the Trove project.  This model was
motivated by a desire to structure the controlled-keyword set so the
user doesn't have to see all of it while specifying a package (that
is, some keywords become `visible' only after given other keywords
have been chosen).
<P>
<H3>Discriminators, Packages, and Searches</H3>

<P>The general model is that the set of controlled keywords is structured
like the nodes of a tree (or more generally like a directed acyclic
graph).  A keyword is selectable only when a predecessor node has been
selected.  A <EM>discriminator</EM> is a rooted path in the tree
(e.g. a sequence of keywords going from root to most specific).
<P>Each package has a list of discriminators associated with it. A
package matches a given discriminator if the package has some
discriminator of which the given discriminator is a prefix.  Thus,
if a package has the discriminator /a/b/c/d, any of the given
discriminators /a, /a/b, /a/b/c, or /a/b/c/d will match it.
The discriminators a, b, c, d, or a/b, or c/d will also match it
(but a/d would not).
<P>A <EM>search</EM> is a set of discriminators created by the user, plus
uncontrolled keywords to match against package descroption fields.
The result of the search is the intersection set of all packages that
match every discriminator in the search, plus the set of all packages
whose descriptions matched the uncontrolled keywords.
<P>
<H3>An Example</H3>

<P>As an example for this model, consider a user wishing to explore what
graphics viewers are available in a Trove catalog.  The user would
like to be able to specify both (a) graphics formats of interest, and
(b) a display toolkit (SVGA, Xlib, Motif, etc.).  Let us suppose that the
user is looking for a Motif GIF viewer.
<P>The user's search might be performed by building the following pair of
discriminators: <B>/topic/graphics/viewers/gif</B> and
<B>/interface/toolkit/motif</B>.
<P>
<H3>Catalogs and Browsing</H3>

<P>A search defines a <EM>catalog</EM>, a subset of the global catalog
that is the entire set of metadata.  This model unifies searching and
browsing; one browses the set of Trove packages by editing a
collection of selections, and viewing the catalog resulting after each
edit.
<P>
<H2><A NAME="ss3.3">3.3 Sketch of Interface Design</A>
</H2>

<P>(Note: this sketch deliberately avoids specifying a detailed UI.)
<P>The user is initially presented with a menu consisting of all keywords
that appear in the leftmost slot of any spec. (This is a subset of the
keytree nodes adjacent to root.)
<P>On choosing one of these, the user is presented with all keywords
which appear in slot 2 of a spec containing the chosen keyword
in slot 1.  This is browsing down the specs.  In addition, any
<EM>package</EM> tagged by a spec consisting solely of the chosen
keyword is also displayed.  There is also
the further option <B>Narrow Search</B>.
<P>Further choices of keywords walk down the spec path, displaying any
packages that have been tagged by the currently chosen spec, along
with the keywords for the next level.  Eventually one reaches a level
where there are only packages and no further keywords.
<P>Choosing ``Narrow Search'' returns one to the top level, but now only
those keywords and packages that can be located in the catalog
consisting of the result of the previous browsing operation are
selectable.  Packages outside the catalog are ignored; excluded keywords
are indicated in a non-selectable mode.
<P>The purpose of `graying out' keywords is to allow the user to see
instantly that what is wanted is inconsistent with the currently
narrowed search.  Narrowing can be iterated, or it can be backed out
of (by throwing away rightmost segments of the current spec).  At all
times the current narrowing list and the current spec are displayed,
so that the user doesn't get lost.
<P>In this style, the user can hardly tell the difference between
browsing and searching: ideally the delay is always the same,
so one does not assemble a ``search string'' and then hit ``Search'';
instead, one simply browses and, if the current catalog seems to be too
large, narrows.  Depending on external considerations, a too-large
catalog might elicit a warning such as ``There are 3500
packages available.  You can |display| the full list or
|narrow| your search.'' (where pipe bars bracket hotlinks).
<P>
<H3>Sample Session</H3>

<P>Let's say the top-level screen provides keywords Topic,
Interface, Audience, Status, etc.  (I will use This Style or THIS STYLE
for keywords, and all-lower-case-nn.nn for packages.)
<P>Choosing Topic, the user is presented with Compilers, Browsers,
Graphics, etc. and Narrow Search (henceforth N.S.).
<P>Choosing Graphics, the user is presented with Painters, Drawers,
Viewers, etc. and N.S.
<P>Choosing Viewers, the user is presented with GIF, JPEG, PNG, etc.
the packages barfoo-2.2, zambaz-3.3 (these are packages that are
not specialized as to format), and N.S.
<P>Choosing GIF, the user gets packages foobar-1.2, bazzam-3.4, etc., etc.,
etc. and N.S.  There are too many to investigate in detail, so the user
chooses N.S. and is returned to the top level.
<P>Choosing Interface, the user is presented with Dumb, Curses,
Toolkit, etc.
<P>Choosing Toolkit, the user is presented with razbaz-9.99 (which
uses a standardly available toolkit), Motif, KDE, etc.
<P>Choosing Motif, the user sees only foobar-1.2, the intersection
of /Topic/Graphics/Viewers/GIF and /Interface/Toolkit/Motif.
<P>And chooses it.
<P>All of this could be done HTML-style, or using one or more choice
boxes, or in any number of other ways - this is an abstract UI.
<P>
<HR>
<A HREF="trove-design-4.html">Next</A>
<A HREF="trove-design-2.html">Previous</A>
<A HREF="trove-design.html#toc3">Contents</A>
</BODY>
</HTML>
