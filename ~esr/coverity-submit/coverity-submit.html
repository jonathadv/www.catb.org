<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>coverity-submit</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /></head><body><div class="refentry"><a id="coverity-submit.1"></a><div class="titlepage"></div><div class="refnamediv"><a id="name"></a><h2>Name</h2><p>coverity-submit — job submission script for Coverity demo server</p></div><div class="refsynopsisdiv"><a id="synopsis"></a><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">coverity-submit</code>  [-b <em class="replaceable"><code>build-version</code></em>] [-n ] [-t <em class="replaceable"><code>project-tag</code></em>] [-v ] [<em class="replaceable"><code>project-name</code></em>]</p></div></div><div class="refsect1"><a id="idm23"></a><h2>DESCRIPTION</h2><p>This tool aims to make submitting projects for code auditing on
the demonstration Coverity server into a one-step operation.  It
automates the sequence of (a) running cov-build locally, (b) bundling
the results into a tarball with a properly formatted README, (c)
submitting a tarball and analysis request to the server, and (d)
retrieving the request status.</p><p>Once you have the enabling metadata data for a project set up,
you can usually submit an analysis job just by running
<span class="command"><strong>coverity-submit</strong></span> without arguments. The Coverity
analyzer will email you a success or failure notification when the
analysis results are available.</p></div><div class="refsect1"><a id="idm28"></a><h2>CONFIGURATION</h2><p>To use this tool, you need to set up a configuration file named
either <code class="filename">.coverity-submit</code> or
<code class="filename">.config/coverity-submit</code> in your home directory.
This configuration file is best explained by example.</p><pre class="programlisting">
[ALL]
name: Eric S. Raymond
userid: esr
email: esr@thyrsus.com
tools: /usr/local/coverity/bin

[gpsd]
token: XXXXXX
prebuild: scons -c
build: scons
postbuild: 

[giflib]
token: YYYYYYY
prebuild: autogen.sh &amp;&amp; make clean
build: make -k
postbuild: 

[cvs-fast-export]
name: parsecvs
token: ZZZZZZZ
prebuild: make clean
build: make
postbuild:

[ntpsec]
name: ntpsec
token: AAAAAAA
prebuild: ./waf clean
build: ./waf
postbuild:

</pre><p>You may begin with an [ALL] section giving your name and userid on the
Coverity server. If you don't specify these, the tool will use your local
usename and the first (comma-separated) portion of your GECOS field.</p><p>You may specify the email address to which success
or failure notifications should be mailed for all other projects here, 
or specify different addresses per-project.</p><p>If cov-build is not in your execution path, you may use the
'tools' option to tell <span class="application">coverity-submit</span>
where to find it.</p><p>This configuration describes four different (real) projects; one
with an scons-based build, one with an autotools-based build, one with
a plain makefile build, and one with a waf build. For each project you
must specify the project's authentication token and the local build
command to pass to cov-build. You may optionally specify local
prebuild and postbuild commands.</p><p>The third example also illustrates how to describe a project
that is known to Coverity by a different name (in this case
<span class="quote">“<span class="quote">parsecvs</span>”</span>) from the basename of the directory you keep
it in (in this case <span class="quote">“<span class="quote">cvs-fast-export</span>”</span>).  This can of
course easily happen if your project's public name changes after
you register it.</p></div><div class="refsect1"><a id="idm42"></a><h2>OPERATION</h2><p>The first thing <span class="application">coverity-submit</span> does
when invoked is figure out which project profile to use.  If no
argument is specified but the basename of the current directory
matches a project, it is selected. Otherwise, a command-line argument
can specify the project name; it is a fatal error for the argument, if
given, not to match the name of one of the configured project profiles.</p><p>Note: because your configuration file contains privileged
information (the per-project Coverity authentication tokens) it should
not have read or write permissions for anyone but its owner set. When
<span class="application">coverity-submit</span> detects such insecure
permissions, it will fix them (telling you it is doing so).</p><p>The <code class="option">-n</code> option says to display all the commands that
would be run without actually executing them. The <code class="option">-v</code> option 
enables slightly more verbose progress messages, and copies the Coverity
build-log.txt from the run to your working directory.</p><p>The <code class="option">-b</code> option specifies an arbitrary build
version to associate with the submission. If coverity-submit is run 
at the top level of a version-control repository, the build version may 
default to a description of the head commit; presently this feature
is supported under git, hg, bzr, and svn.</p><p>The <code class="option">-t</code> option specifies an arbitrary project
tag or description to associate with the submission. This text is
visible in the "snapshots" view of the Coverity web interface. If you
do not specify a description, the ISO8601 date that the submission
was initiated is used.</p><p>Once <span class="application">coverity-submit</span> has determined
which project profile to use, it then performs the following steps:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>The project's local prebuild command, if specified.</p></li><li class="step"><p>The project's local build command.</p></li><li class="step"><p>The project's local postbuild command, if specified.</p></li><li class="step"><p>Generating a README and bundling it into a tarball with the scan results.</p></li><li class="step"><p>Sending the tarball and an analysis job request to the Coverity server.</p></li></ol></div><p>The script will report the result of the job request by dumping the
server's HTML response.</p></div><div class="refsect1"><a id="idm69"></a><h2>TROUBLESHOOTING</h2><p>If, after a period of normal operation, you see a complaint that
no compilation units are being built, this may mean your version of
the Coverity build tools has gone stale.  This has been known to
happen on GCC version bumps. Try installing an-up-to-date version of
the tools.</p></div><div class="refsect1"><a id="idm72"></a><h2>BACKWARD COMPATIBILITY</h2><p>For backward compatibity, 'password' is treated as a synonym for
'token'; the change follows a change in the terminology of Coverity's
configuration instructions.</p><p>The <code class="option">build</code> and <code class="option">advertise</code>
options of versions 1.1 and previously are no longer needed, as
Coverity has changed its submission form to support direct upload of
the results tarball.</p></div><div class="refsect1"><a id="idm78"></a><h2>PREREQUISITES</h2><p>Requires Python, curl, and <a class="ulink" href="https://scan.coverity.com/download" target="_top">cov-build</a>.</p><p>The Coverity Scan facility has a home page:
<a class="ulink" href="https://scan.coverity.com" target="_top">https://scan.coverity.com</a>.
You can find instructions on how to register projects for scanning there.
</p></div><div class="refsect1"><a id="maintainer"></a><h2>AUTHOR</h2><p>Eric S. Raymond <code class="email">&lt;<a class="email" href="mailto:esr@thyrsus.com">esr@thyrsus.com</a>&gt;</code>.  There is a
project page for this tool at <a class="ulink" href="http://www.catb.org/~esr/coverity-submit/" target="_top">http://www.catb.org/~esr/coverity-submit/coverity-submit.html</a>.</p></div></div></body></html>